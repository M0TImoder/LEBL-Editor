<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/src/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LEBL Editor</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>

  <body>
    <div id="app" class="app_root">
      <header class="app_header">
        <div class="app_title_area">
          <h1 class="app_title">LEBL Editor</h1>
          <p class="app_subtitle">Pythonとブロックの双方向編集環境</p>
        </div>
        <div class="app_actions">
          <button id="run_button" class="app_button app_button_primary" type="button">
            実行
          </button>
          <button id="stop_button" class="app_button app_button_danger" type="button">
            停止
          </button>
          <button id="save_button" class="app_button" type="button">保存</button>
          <button id="load_button" class="app_button" type="button">読み込み</button>
          <button id="theme_toggle" class="app_button" type="button">ダーク</button>
          <button id="help_button" class="app_button" type="button">？</button>
        </div>
      </header>
      <main class="app_main">
        <div class="pane_group">
          <section class="pane code_pane">
            <div class="pane_header">Pythonコード</div>
            <div id="tab_bar">
              <div id="tab_list"></div>
              <button id="new_tab_btn" class="tab_add_btn" title="新しいファイル">+</button>
            </div>
            <div id="code_editor_container" class="code_editor_container"></div>
          </section>
          <section class="pane block_pane">
            <div class="pane_header">ブロック</div>
            <div id="blockly_workspace" class="blockly_workspace"></div>
          </section>
        </div>
        <section class="pane output_pane">
          <div class="pane_header">実行結果</div>
          <pre id="output_console" class="output_console"></pre>
        </section>
      </main>
    </div>

    <div id="help_modal_overlay" class="help_modal_overlay" hidden>
      <div class="help_modal">
        <button id="help_modal_close" class="help_modal_close" type="button">×</button>
        <h2>LEBL Editor - ヘルプ</h2>

        <h3>■ 基本操作</h3>
        <ul>
          <li>左側のコードエディタにPythonコードを入力すると、右側にブロックが自動生成されます</li>
          <li>右側のブロックを編集すると、左側のコードが自動更新されます</li>
          <li>ツールボックス（右端）からブロックをドラッグして追加できます</li>
        </ul>

        <h3>■ ファイル操作</h3>
        <ul>
          <li>開く: ファイルを開いて編集</li>
          <li>保存: 現在のファイルを保存</li>
          <li>名前をつけて保存: 新しい名前で保存</li>
          <li>タブ: 複数ファイルを同時に編集可能</li>
        </ul>

        <h3>■ 実行</h3>
        <ul>
          <li>「実行」ボタンでPythonコードを実行</li>
          <li>「停止」ボタンで実行中のプログラムを停止</li>
          <li>実行結果は下部の出力エリアに表示されます</li>
        </ul>

        <h3>■ 対応するPython構文</h3>
        <p>
          変数代入、if/elif/else、for/while、関数定義、クラス定義、
          リスト/辞書/集合、演算子、比較、論理演算、
          import、try/except、with、return/break/continue、
          f-string、スライス、デコレータ、型アノテーション、
          assert/raise/del/global/nonlocal
        </p>

        <h3>■ ショートカットキー</h3>
        <ul>
          <li>Ctrl+Z: 元に戻す</li>
          <li>Ctrl+Y: やり直し</li>
          <li>Ctrl+S: 保存</li>
          <li>Ctrl+O: 開く</li>
        </ul>
      </div>
    </div>
  </body>
</html>
